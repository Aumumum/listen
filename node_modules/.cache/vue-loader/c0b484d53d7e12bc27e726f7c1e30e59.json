{"remainingRequest":"C:\\Users\\Aum\\listen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Aum\\listen\\src\\components\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Aum\\listen\\src\\components\\detail.vue","mtime":1631717025906},{"path":"C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRQbGF5bGlzdERldGFpbCxnZXRTb25nRGV0YWlsIH0gZnJvbSAiLi4vYXBpL2luZGV4IjsNCmltcG9ydCBQbGF5TGlzdCBmcm9tICIuL3BsYXlMaXN0LnZ1ZSI7DQoNCmltcG9ydCB7IG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkZXRhaWw6IHsNCiAgICAgICAgbmFtZTogIiIsDQogICAgICAgIGNvdmVySW1nVXJsOiAiIiwNCiAgICAgICAgdGFnczogW10sDQogICAgICAgIHRyYWNrQ291bnQ6IDAsDQogICAgICAgIHBsYXlDb3VudDogMCwNCiAgICAgICAgZGVzY3JpcHRpb246ICIiLA0KICAgICAgfSwNCiAgICAgIHRiRGF0YTogW10sDQogICAgfTsNCiAgfSwNCiAgY29tcG9uZW50czogeyBQbGF5TGlzdCB9LA0KICBwcm9wczogWyJpZCJdLA0KICBtZXRob2RzOiB7DQogICAgDQogICAgLi4ubWFwTXV0YXRpb25zKCJwbGF5ZXJBYm91dCIsIFsiY2hhbmdlUGxheWluZ0luZGV4IiwicHVzaEFsbCJdKSwNCiAgICAgdGltZUZvcm10KHZhbHVlKSB7DQogICAgICB2YWx1ZSA9IE1hdGguY2VpbCh2YWx1ZSAvIDEwMDApOw0KICAgICAgbGV0IG0gPSBwYXJzZUludCh2YWx1ZSAvIDYwKTsNCiAgICAgIGxldCBzID0gdmFsdWUgJSA2MDsNCiAgICAgIGlmIChzIDwgMTApIHMgPSAiMCIgKyBzOw0KICAgICAgcmV0dXJuIG0gKyAiOiIgKyBzOw0KICAgIH0sDQpwbGF5QWxsKCl7DQogIA0KDQp0aGlzLiRjb25maXJtKCcnLCAn6K+l5pON5L2c5Lya5riF56m65b2T5YmN5pKt5pS+5YiX6KGo77yM5piv5ZCm57un57ut77yfJywgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICBjZW50ZXI6dHJ1ZSwNCiAgICAgICAgICByb3VuZEJ1dHRvbjp0cnVlLA0KICAgICAgICAgIHNob3dDbG9zZTpmYWxzZQ0KICAgICAgICB9KQ0KICAgICAgICAudGhlbihhY3Rpb24gPT4gew0KICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdjb25maXJtJykgew0KICAgICAgICAgICAgdGhpcy5wdXNoQWxsKHRoaXMudGJEYXRhKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCg0KICAgICAgICANCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojmkq3mlL7lhajpg6gnDQogICAgICAgICAgfSk7ICANCiAgICAgICAgfSkgIA0KDQoNCg0KfSwNCiAgICBsb2FkKCkgew0KICAgICAgZ2V0UGxheWxpc3REZXRhaWwoeyBpZDogdGhpcy5pZCB9KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICBsZXQgb2JqID0gcmVzcG9uc2UuZGF0YS5wbGF5bGlzdDsNCiAgICAgICAgT2JqZWN0LmtleXModGhpcy5kZXRhaWwpLmZvckVhY2goKGtleSkgPT4gew0KICAgICAgICAgIHRoaXMuZGV0YWlsW2tleV0gPSBvYmpba2V5XTsNCiAgICAgICAgfSk7DQogICAgICAgIGxldCBpZHMgPSBbXTsNCiAgICAgICAgb2JqLnRyYWNrSWRzLmZvckVhY2goKGl0ZW0saW5kZXgpID0+IHsNCiAgICAgICAgICBpZHNbaW5kZXhdPSBpdGVtLmlkDQogICAgICAgIH0pOw0KZ2V0U29uZ0RldGFpbCh7aWRzOmlkcy50b1N0cmluZygpfSkudGhlbihyZXNwb25zZT0+ew0KICAgbGV0IGFyciA9IHJlc3BvbnNlLmRhdGEuc29uZ3MNCiAgICAgICAgICB0aGlzLnRiRGF0YSA9IGFyci5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oew0KICAgICAgICAgICAgc2VyaWFsOiBpbmRleCA8IDkgPyAiMCIgKyAoaW5kZXggKyAxKSA6IGluZGV4ICsgMSwNCiAgICAgICAgICAgIHRpdGxlOiAgaXRlbS5uYW1lLA0KICAgICAgICAgICAgcG9wOiBpdGVtLnBvcCwNCiAgICAgICAgICAgIHNpbmdlcjogaXRlbS5hclswXS5uYW1lLA0KICAgICAgICAgICAgYWxidW06IGl0ZW0uYWwubmFtZSwNCiAgICAgICAgICAgIGR1cmF0aW9uOiBpdGVtLmR0LA0KICAgICAgICAgICAgZm9ybVRpbWU6IHRoaXMudGltZUZvcm10KGl0ZW0uZHQpLA0KICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsDQogICAgICAgICAgICBwaWNVcmw6IGl0ZW0uYWwucGljVXJsLCANCiAgICAgICAgfSk7IA0KICAgICAgICANCiAgICAgICB9KQ0KICAgIGNvbnNvbGUubG9nKHRoaXMudGJEYXRhKQ0KfSkNCiAgICAgIH0pOw0KICAgIH0sDQogIH0sDQogIGJlZm9yZU1vdW50KCkgew0KICAgIHRoaXMubG9hZCgpOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <div class=\"ad\">\r\n      <img :src=\"detail.coverImgUrl\" lazy alt=\"歌单封面\" />\r\n      <span class=\"dis\">\r\n        <h2>{{ detail.name }}</h2>\r\n        <el-button icon=\"el-icon-video-play\" type=\"warning\" round\r\n          @click=\"playAll\">播放全部</el-button\r\n        ><br />\r\n        <span><strong>标签：</strong>{{ detail.tags }}</span\r\n        ><br />\r\n        <span><strong>歌曲：</strong>{{ detail.trackCount }}</span\r\n        >｜<span><strong>播放：</strong>{{ detail.playCount }}</span\r\n        ><br />\r\n        <span class=\"di\"><strong>简介：</strong>{{ detail.description }}</span>\r\n      </span>\r\n    </div>\r\n    <PlayList :tbData=\"tbData\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getPlaylistDetail,getSongDetail } from \"../api/index\";\r\nimport PlayList from \"./playList.vue\";\r\n\r\nimport { mapMutations } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      detail: {\r\n        name: \"\",\r\n        coverImgUrl: \"\",\r\n        tags: [],\r\n        trackCount: 0,\r\n        playCount: 0,\r\n        description: \"\",\r\n      },\r\n      tbData: [],\r\n    };\r\n  },\r\n  components: { PlayList },\r\n  props: [\"id\"],\r\n  methods: {\r\n    \r\n    ...mapMutations(\"playerAbout\", [\"changePlayingIndex\",\"pushAll\"]),\r\n     timeFormt(value) {\r\n      value = Math.ceil(value / 1000);\r\n      let m = parseInt(value / 60);\r\n      let s = value % 60;\r\n      if (s < 10) s = \"0\" + s;\r\n      return m + \":\" + s;\r\n    },\r\nplayAll(){\r\n  \r\n\r\nthis.$confirm('', '该操作会清空当前播放列表，是否继续？', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          center:true,\r\n          roundButton:true,\r\n          showClose:false\r\n        })\r\n        .then(action => {\r\n          if (action === 'confirm') {\r\n            this.pushAll(this.tbData)\r\n          }\r\n        })\r\n\r\n        \r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消播放全部'\r\n          });  \r\n        })  \r\n\r\n\r\n\r\n},\r\n    load() {\r\n      getPlaylistDetail({ id: this.id }).then((response) => {\r\n        let obj = response.data.playlist;\r\n        Object.keys(this.detail).forEach((key) => {\r\n          this.detail[key] = obj[key];\r\n        });\r\n        let ids = [];\r\n        obj.trackIds.forEach((item,index) => {\r\n          ids[index]= item.id\r\n        });\r\ngetSongDetail({ids:ids.toString()}).then(response=>{\r\n   let arr = response.data.songs\r\n          this.tbData = arr.map((item, index) => {\r\n          return Object.assign({\r\n            serial: index < 9 ? \"0\" + (index + 1) : index + 1,\r\n            title:  item.name,\r\n            pop: item.pop,\r\n            singer: item.ar[0].name,\r\n            album: item.al.name,\r\n            duration: item.dt,\r\n            formTime: this.timeFormt(item.dt),\r\n            id: item.id,\r\n            picUrl: item.al.picUrl, \r\n        }); \r\n        \r\n       })\r\n    console.log(this.tbData)\r\n})\r\n      });\r\n    },\r\n  },\r\n  beforeMount() {\r\n    this.load();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.main {\r\n  height: 100%;\r\n}\r\n.ad {\r\n  display: -webkit-flex;\r\n  display: flex;\r\n  color: #494747;\r\n}\r\nimg {\r\n  width: 180px;\r\n  height: 180px;\r\n  padding: 0 20px;\r\n}\r\n.dis {\r\n  position: relative;\r\n  top: -20px;\r\n  height: 200px;\r\n  overflow: hidden;\r\n}\r\n.dis:hover {\r\n  height: auto;\r\n  overflow: visible;\r\n}\r\n.dis span {\r\n  line-height: 33px;\r\n}\r\n\r\n.di {\r\n  white-space: pre-wrap;\r\n}\r\n</style>\r\n"]}]}