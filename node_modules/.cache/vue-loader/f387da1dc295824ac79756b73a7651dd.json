{"remainingRequest":"C:\\Users\\Aum\\listen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Aum\\listen\\src\\components\\songList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Aum\\listen\\src\\components\\songList.vue","mtime":1631717879797},{"path":"C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRMaXN0LCBnZXRUYWdzLCBnZXRIaWdocXVhbGl0eSB9IGZyb20gIi4uL2FwaS9pbmRleCI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJzb25nTGlzdCIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRhZ3M6IHsgaXNBY3RpdmU6IC0xIH0sDQogICAgICBoaWdocXVhbGl0eTogew0KICAgICAgICBjb3ZlckltZ1VybDogIiIsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBjb3B5d3JpdGVyOiAiIiwNCiAgICAgICAgaWQ6ICIiLA0KICAgICAgfSwNCiAgICAgIHNvbmdMaXN0OiB7IGxpbWl0OiAxOCwgcGFnaW5hdGlvbjogMSwgdGl0bGU6ICLmjqjojZDmrYzljZUiLCBsaXN0OiBbXSB9LA0KICAgIH07DQogIH0sDQogIHByb3BzOiBbImlzRnVsbCJdLA0KICBjb21wdXRlZDogew0KICAgIG9mZnNldCgpIHsNCiAgICAgIHJldHVybiAodGhpcy5zb25nTGlzdC5wYWdpbmF0aW9uIC0gMSkgKiB0aGlzLnNvbmdMaXN0LmxpbWl0Ow0KICAgIH0sDQogICAgY2F0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuc29uZ0xpc3QudGl0bGUgPT09ICLmjqjojZDmrYzljZUiID8gIuWFqOmDqCIgOiB0aGlzLnNvbmdMaXN0LnRpdGxlOw0KICAgIH0sDQogICAgc3RhdGVDaGFuZ2UoKSB7DQogICAgICBjb25zdCB7IGxpbWl0LCBwYWdpbmF0aW9uLCB0aXRsZSB9ID0gdGhpcy5zb25nTGlzdDsNCiAgICAgIHJldHVybiB7IGxpbWl0LCBwYWdpbmF0aW9uLCB0aXRsZSB9Ow0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgInNvbmdMaXN0LnRpdGxlIjogew0KICAgICAgIGhhbmRsZXIoKSB7DQogICAgICAgICB0aGlzLmxvYWRBTGwoKTsNCiAgICAgIH0sDQogICAgICBpbW1lZGlhdGU6IHRydWUsDQogICAgfSwNCiAgICBzdGF0ZUNoYW5nZTogew0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgdGhpcy5saXN0Q2hhbmdlKCk7DQogICAgICB9LA0KICAgIH0saW1tZWRpYXRlOiB0cnVlLA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGVsKGluZGV4LCBuYW1lKSB7DQogICAgICB0aGlzLnRhZ3MuaXNBY3RpdmUgPSBpbmRleDsNCiAgICAgIHRoaXMuc29uZ0xpc3QudGl0bGUgPSBuYW1lOw0KICAgICAgdGhpcy5zb25nTGlzdC5wYWdpbmF0aW9uID0gMTsNCiAgICB9LA0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnNvbmdMaXN0LmxpbWl0ID0gdmFsOw0KICAgIH0sDQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMuc29uZ0xpc3QucGFnaW5hdGlvbiA9IHZhbDsNCiAgICB9LA0KICANCiAgICBsb2FkQUxsKCkgew0KICAgICAgZ2V0SGlnaHF1YWxpdHkoew0KICAgICAgICBsaW1pdDogMSwNCiAgICAgICAgY2F0OiB0aGlzLmNhdCwNCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIGxldCBvYmogPSByZXNwb25zZS5kYXRhLnBsYXlsaXN0c1swXTsNCiAgICAgICAgT2JqZWN0LmtleXModGhpcy5oaWdocXVhbGl0eSkuZm9yRWFjaCgoa2V5KSA9PiB7DQogICAgICAgICAgdGhpcy5oaWdocXVhbGl0eVtrZXldID0gb2JqW2tleV07DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBsaXN0Q2hhbmdlKCkgew0KICAgICAgZ2V0TGlzdCh7DQogICAgICAgIGxpbWl0OiB0aGlzLmlzRnVsbCA/IHRoaXMuc29uZ0xpc3QubGltaXQgOjYsDQogICAgICAgIG9mZnNldDogdGhpcy5vZmZzZXQsDQogICAgICAgIGNhdDogdGhpcy5jYXQsDQogICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICBsZXQgYXJyID0gcmVzcG9uc2UuZGF0YS5wbGF5bGlzdHM7DQogICAgICAgIGxldCBvYmo9e30NCiAgICAgYXJyPWFyci5yZWR1Y2UoZnVuY3Rpb24oYSwgYikgew0KICAgICAgICBvYmpbYi5pZF0gPyAnJyA6IG9ialtiLmlkXSA9IHRydWUgJiYgYS5wdXNoKGIpOw0KICAgICAgICByZXR1cm4gYTsNCiAgICB9LCBbXSkNCiAgICAgICAgdGhpcy5zb25nTGlzdC5saXN0ID0gYXJyLm1hcCgoaXRlbSkgPT4gew0KICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsNCiAgICAgICAgICAgIGlkOiBpdGVtLmlkLA0KICAgICAgICAgICAgcGljVXJsOiBpdGVtLmNvdmVySW1nVXJsLA0KICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ29QbGF5KGlkKSB7DQoNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICBwYXRoOiAiL2xpc3QvZGV0YWlsIiwNCiAgICAgICAgICBxdWVyeTogew0KICAgICAgICAgICAgaWQsDQogICAgICAgICAgfSwNCiAgICAgICAgfSk7DQogICAgICANCiAgICB9LA0KICB9LA0KICBiZWZvcmVNb3VudCgpIHsNCiAgICB0aGlzLiRuZXh0VGljaygoKT0+e3RoaXMubGlzdENoYW5nZSgpO30pDQogICAgIA0KICAgIGdldFRhZ3MoKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgdGhpcy50YWdzID0gcmVzcG9uc2UuZGF0YS50YWdzLnNsaWNlKDAsIDkpOw0KICAgIH0pOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["songList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"songList.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <div\r\n      v-if=\"isFull\"\r\n      class=\"ad animate__animated animate__bounceInDown animate__delay-.7s\"\r\n      :style=\"{ backgroundImage: 'url(' + highquality.coverImgUrl + ')' }\"\r\n    >\r\n        <img class=\"dis\" :src=\"highquality.coverImgUrl\" lazy alt=\"精品歌单封面图片\" />\r\n      <span class=\"di\">\r\n        <span class=\"top\" @click=\"goPlay(highquality.id)\">\r\n          <i class=\"el-icon-medal-1\" style=\"paddingRight:10px\" />精品歌单\r\n        </span>\r\n<h2>{{ highquality.name }}</h2>\r\n        <span>{{ highquality.copywriter }}</span></span>\r\n    \r\n      <div class=\"tag animate__animated  animate__fadeIn animate__delay-1s\">\r\n        <span v-for=\"(tag, index) in tags\" :key=\"index\">\r\n          <span\r\n            class=\"item \"\r\n            :class=\"{ active: index === tags.isActive }\"\r\n            @click=\"handel(index, tag.name)\"\r\n          >\r\n            {{ tag.name }}\r\n          </span>\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <h3 class=\"animate__animated  animate__fadeIn animate__delay-1s\">\r\n      {{ songList.title }}\r\n    </h3>\r\n    <el-row :gutter=\"15\">\r\n      <el-col   v-for=\"item in songList.list\" :key=\"item.id\" :span=\"4\">\r\n        <el-card\r\n          class=\"duck animate__animated animate__flipInX\"\r\n          shadow=\"hover\"\r\n          :body-style=\"{ padding: '0px' }\"\r\n          :title=\"item.name\"\r\n        >\r\n          <img  @click=\"goPlay(item.id)\" :src=\"item.picUrl\" lazy alt=\"歌单封面\" />\r\n          \r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <div\r\n      v-show=\"isFull\"\r\n      class=\"block animate__animated  animate__fadeIn animate__delay-2s\"\r\n    >\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :page-sizes=\"[18, 30, 42, 60]\"\r\n        :page-size=\"18\"\r\n        :current-page=\"songList.pagination\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"1200\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getList, getTags, getHighquality } from \"../api/index\";\r\nexport default {\r\n  name: \"songList\",\r\n  data() {\r\n    return {\r\n      tags: { isActive: -1 },\r\n      highquality: {\r\n        coverImgUrl: \"\",\r\n        name: \"\",\r\n        copywriter: \"\",\r\n        id: \"\",\r\n      },\r\n      songList: { limit: 18, pagination: 1, title: \"推荐歌单\", list: [] },\r\n    };\r\n  },\r\n  props: [\"isFull\"],\r\n  computed: {\r\n    offset() {\r\n      return (this.songList.pagination - 1) * this.songList.limit;\r\n    },\r\n    cat() {\r\n      return this.songList.title === \"推荐歌单\" ? \"全部\" : this.songList.title;\r\n    },\r\n    stateChange() {\r\n      const { limit, pagination, title } = this.songList;\r\n      return { limit, pagination, title };\r\n    },\r\n  },\r\n  watch: {\r\n    \"songList.title\": {\r\n       handler() {\r\n         this.loadALl();\r\n      },\r\n      immediate: true,\r\n    },\r\n    stateChange: {\r\n      handler() {\r\n        this.listChange();\r\n      },\r\n    },immediate: true,\r\n  },\r\n  methods: {\r\n    handel(index, name) {\r\n      this.tags.isActive = index;\r\n      this.songList.title = name;\r\n      this.songList.pagination = 1;\r\n    },\r\n    handleSizeChange(val) {\r\n      this.songList.limit = val;\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.songList.pagination = val;\r\n    },\r\n  \r\n    loadALl() {\r\n      getHighquality({\r\n        limit: 1,\r\n        cat: this.cat,\r\n      }).then((response) => {\r\n        let obj = response.data.playlists[0];\r\n        Object.keys(this.highquality).forEach((key) => {\r\n          this.highquality[key] = obj[key];\r\n        });\r\n      });\r\n    },\r\n    listChange() {\r\n      getList({\r\n        limit: this.isFull ? this.songList.limit :6,\r\n        offset: this.offset,\r\n        cat: this.cat,\r\n      }).then((response) => {\r\n        let arr = response.data.playlists;\r\n        let obj={}\r\n     arr=arr.reduce(function(a, b) {\r\n        obj[b.id] ? '' : obj[b.id] = true && a.push(b);\r\n        return a;\r\n    }, [])\r\n        this.songList.list = arr.map((item) => {\r\n          return Object.assign({\r\n            id: item.id,\r\n            picUrl: item.coverImgUrl,\r\n            name: item.name,\r\n          });\r\n        });\r\n      });\r\n    },\r\n    goPlay(id) {\r\n\r\n      this.$router.push({\r\n          path: \"/list/detail\",\r\n          query: {\r\n            id,\r\n          },\r\n        });\r\n      \r\n    },\r\n  },\r\n  beforeMount() {\r\n    this.$nextTick(()=>{this.listChange();})\r\n     \r\n    getTags().then((response) => {\r\n      this.tags = response.data.tags.slice(0, 9);\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.ad {\r\n  display: -webkit-flex; /* Safari */\r\n  display: flex;\r\n   justify-content:flex-start;\r\n   align-items:center;\r\n   padding: 15px 25px;\r\n  background-size: 21000px 21000px;\r\n  border-radius: 0.5em;\r\n  color: #fff;\r\n  font-size: 14px;\r\n}\r\n.dis{\r\n  min-width: 100px;\r\n  min-height: 100px;\r\n}\r\n.di{\r\n  padding-top: 8px;\r\n  padding-left: 18px;\r\nwhite-space: nowrap;\r\n  overflow: hidden;\r\n}\r\n.top {\r\n  color: #d3b301;\r\n  box-sizing: border-box;\r\n  border: 1px #d3b301 solid;\r\n  padding: 7px 12px;\r\n  border-radius: 2em;\r\n  cursor: pointer;\r\n}\r\n.tag {\r\n  \r\n   margin-left: 85px;\r\n   height: 30px;\r\n   line-height: 30px;\r\n   overflow: hidden;\r\n  position: absolute;\r\n  color: #424242ab;\r\n  font-size: 8px;\r\n  right: 20px;\r\n  bottom: -43px;\r\n}\r\n.duck{\r\n  box-sizing: border-box;\r\n}\r\n.duck::before{\r\n  width: 100%;\r\n  height: 100%;\r\n  position:absolute;\r\n   content:          \"play\";\r\n   line-height: 180px;\r\n   font-weight: 800;\r\n   border: 2px solid transparent;\r\n   color: snow;\r\n   text-align: center;\r\n   background-color: rgba(0, 0, 0, 0.1);\r\n   backdrop-filter: blur(1px) Saturate(1080%);\r\n  cursor: pointer;\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n.duck:hover::before {\r\n  opacity: 1;\r\n  pointer-events: none;\r\n}\r\n.active {\r\n  text-orientation: right;\r\n  font-size: 12px;\r\n  background: #dfd9b7;\r\n  color: #d3b301;\r\n}\r\nh3{\r\n  display: inline-block;\r\n}\r\n.item {\r\n  margin-right: 10px;\r\n  padding: 3px 9px;\r\n  border-radius: 1.5em;\r\n  cursor: pointer;\r\n}\r\n.el-col {\r\nmargin-bottom: 20px;\r\n}\r\n.duck{\r\n   width: calc(100vw * 0.122);\r\n height: calc(100vw * 0.122);\r\n}\r\nimg {\r\n  height: calc(100vw * 0.122);\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"]}]}