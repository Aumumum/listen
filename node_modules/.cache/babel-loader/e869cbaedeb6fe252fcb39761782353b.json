{"remainingRequest":"C:\\Users\\Aum\\listen\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Aum\\listen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Aum\\listen\\src\\components\\top_bar\\search.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Aum\\listen\\src\\components\\top_bar\\search.vue","mtime":1631358549310},{"path":"C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0VHlwaW5nIH0gZnJvbSAiLi4vLi4vYXBpIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJzZWFyY2giLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdHlwZVN1Z2dlc3Q6IFtdLAogICAgICBzdGF0ZTogIiIsCiAgICAgIHRpbWVvdXQ6IDAKICAgIH07CiAgfSwKCiAgd2F0Y2g6IHsKICAgIHN0YXRlOiB7CiAgICAgIGhhbmRsZXIobmV3VmFsKSB7CiAgICAgICAgaWYgKG5ld1ZhbCkgZ2V0VHlwaW5nKHsKICAgICAgICAgIGtleXdvcmRzOiBuZXdWYWwKICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGxldCBhcnIgPSByZXNwb25zZS5kYXRhLnJlc3VsdC5zb25nczsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgdGhpcy50eXBlU3VnZ2VzdCA9IGFyci5tYXAoaXRlbSA9PiB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsKICAgICAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgICAgICB0aXRsZTogaXRlbS5uYW1lLAogICAgICAgICAgICAgIHNpbmdlcjogaXRlbS5hcnRpc3RzWzBdLm5hbWUsCiAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMudGltZUZvcm10KGl0ZW0uZHVyYXRpb24pLAogICAgICAgICAgICAgIHZhbHVlOiBpdGVtLm5hbWUgKyBg77yI5q2M5omLOiAke2l0ZW0uYXJ0aXN0c1swXS5uYW1lfe+8iWAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQoKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRpbWVGb3JtdCh2YWx1ZSkgewogICAgICB2YWx1ZSA9IE1hdGguY2VpbCh2YWx1ZSAvIDEwMDApOwogICAgICBsZXQgbSA9IHBhcnNlSW50KHZhbHVlIC8gNjApOwogICAgICBsZXQgcyA9IHZhbHVlICUgNjA7CiAgICAgIHJldHVybiBtICsgIjoiICsgczsKICAgIH0sCgogICAgLi4ubWFwQWN0aW9ucygicGxheWVyQWJvdXQiLCBbInB1c2hTb25nIl0pLAogICAgLi4ubWFwTXV0YXRpb25zKCJwbGF5ZXJBYm91dCIsIFsiY2hhbmdlUGxheWluZ0luZGV4Il0pLAoKICAgIHF1ZXJ5U2VhcmNoQXN5bmMocXVlcnlTdHJpbmcsIGNiKSB7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpOwogICAgICBpZiAocXVlcnlTdHJpbmcpIHRoaXMudGltZW91dCA9IDEwMDAwICogTWF0aC5yYW5kb20oKTtlbHNlIHRoaXMudHlwZVN1Z2dlc3QgPSBbXTsKICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMudHlwZVN1Z2dlc3Q7CiAgICAgICAgY2IocmVzdWx0KTsKICAgICAgfSwgdGhpcy50aW1lb3V0KTsKICAgIH0sCgogICAgaGFuZGxlU2VsZWN0KGl0ZW0pIHsKICAgICAgbGV0IG9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHsKICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICB0aXRsZTogaXRlbS50aXRsZSwKICAgICAgICBzaW5nZXI6IGl0ZW0uc2luZ2VyLAogICAgICAgIGR1cmF0aW9uOiBpdGVtLmR1cmF0aW9uLAogICAgICAgIHVybDogImh0dHBzOi8vbXVzaWMuMTYzLmNvbS9zb25nL21lZGlhL291dGVyL3VybD9pZD0iICsgaXRlbS5pZAogICAgICB9KTsKICAgICAgdGhpcy5wdXNoU29uZyhvYmopOwogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUucGxheWVyQWJvdXQucGxheUxpc3QuaW5jbHVkZXMob2JqKSkgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHsKICAgICAgICBtZXNzYWdlOiAi5re75Yqg5YiX6KGo5oiQ5Yqf77yM5LiL5LiA6aaW5pKt5pS+IiwKICAgICAgICBzaG93Q2xvc2U6IGZhbHNlCiAgICAgIH0pO2Vsc2UgdGhpcy4kbWVzc2FnZS5lcnJvcih7CiAgICAgICAgbWVzc2FnZTogIuatjOabsuW3suWtmOWcqCIsCiAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZQogICAgICB9KTsKICAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS5wbGF5ZXJBYm91dC5pc1BsYXlpbmcpIHRoaXMuY2hhbmdlUGxheWluZ0luZGV4KHRoaXMuJHN0b3JlLnN0YXRlLnBsYXllckFib3V0LnBsYXlpbmdJbmRleCArIDEpOwogICAgfQoKICB9Cn07"},{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;AAUA,SAAA,SAAA,QAAA,WAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,SAAA,YAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;;AAEA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAAA;AAKA,GARA;;AASA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,MAAA,EAAA;AACA,YAAA,MAAA,EACA,SAAA,CAAA;AAAA,UAAA,QAAA,EAAA;AAAA,SAAA,CAAA,CAAA,IAAA,CAAA,QAAA,IAAA;AACA,cAAA,GAAA,GAAA,QAAA,CAAA,IAAA,CAAA,MAAA,CAAA,KAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,eAAA,WAAA,GAAA,GAAA,CAAA,GAAA,CAAA,IAAA,IAAA;AACA,mBAAA,MAAA,CAAA,MAAA,CAAA;AACA,cAAA,EAAA,EAAA,IAAA,CAAA,EADA;AAEA,cAAA,KAAA,EAAA,IAAA,CAAA,IAFA;AAGA,cAAA,MAAA,EAAA,IAAA,CAAA,OAAA,CAAA,CAAA,EAAA,IAHA;AAIA,cAAA,QAAA,EAAA,KAAA,SAAA,CAAA,IAAA,CAAA,QAAA,CAJA;AAKA,cAAA,KAAA,EAAA,IAAA,CAAA,IAAA,GAAA,QAAA,IAAA,CAAA,OAAA,CAAA,CAAA,EAAA,IAAA;AALA,aAAA,CAAA;AAOA,WARA,CAAA;AASA,SAZA;AAaA;;AAhBA;AADA,GATA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,SAAA,CAAA,KAAA,EAAA;AACA,MAAA,KAAA,GAAA,IAAA,CAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA;AACA,UAAA,CAAA,GAAA,QAAA,CAAA,KAAA,GAAA,EAAA,CAAA;AACA,UAAA,CAAA,GAAA,KAAA,GAAA,EAAA;AACA,aAAA,CAAA,GAAA,GAAA,GAAA,CAAA;AACA,KANA;;AAOA,OAAA,UAAA,CAAA,aAAA,EAAA,CAAA,UAAA,CAAA,CAPA;AAQA,OAAA,YAAA,CAAA,aAAA,EAAA,CAAA,oBAAA,CAAA,CARA;;AASA,IAAA,gBAAA,CAAA,WAAA,EAAA,EAAA,EAAA;AACA,MAAA,YAAA,CAAA,KAAA,OAAA,CAAA;AACA,UAAA,WAAA,EAAA,KAAA,OAAA,GAAA,QAAA,IAAA,CAAA,MAAA,EAAA,CAAA,KACA,KAAA,WAAA,GAAA,EAAA;AACA,WAAA,OAAA,GAAA,UAAA,CAAA,MAAA;AACA,YAAA,MAAA,GAAA,KAAA,WAAA;AACA,QAAA,EAAA,CAAA,MAAA,CAAA;AACA,OAHA,EAGA,KAAA,OAHA,CAAA;AAIA,KAjBA;;AAmBA,IAAA,YAAA,CAAA,IAAA,EAAA;AACA,UAAA,GAAA,GAAA,MAAA,CAAA,MAAA,CACA,EADA,EAEA;AACA,QAAA,EAAA,EAAA,IAAA,CAAA,EADA;AAEA,QAAA,KAAA,EAAA,IAAA,CAAA,KAFA;AAGA,QAAA,MAAA,EAAA,IAAA,CAAA,MAHA;AAIA,QAAA,QAAA,EAAA,IAAA,CAAA,QAJA;AAKA,QAAA,GAAA,EAAA,mDAAA,IAAA,CAAA;AALA,OAFA,CAAA;AAUA,WAAA,QAAA,CAAA,GAAA;AACA,UAAA,KAAA,MAAA,CAAA,KAAA,CAAA,WAAA,CAAA,QAAA,CAAA,QAAA,CAAA,GAAA,CAAA,EACA,KAAA,QAAA,CAAA,OAAA,CAAA;AACA,QAAA,OAAA,EAAA,cADA;AAEA,QAAA,SAAA,EAAA;AAFA,OAAA,EADA,KAOA,KAAA,QAAA,CAAA,KAAA,CAAA;AACA,QAAA,OAAA,EAAA,OADA;AAEA,QAAA,SAAA,EAAA;AAFA,OAAA;AAIA,UAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,WAAA,CAAA,SAAA,EACA,KAAA,kBAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,WAAA,CAAA,YAAA,GAAA,CAAA;AACA;;AA5CA;AA7BA,CAAA","sourcesContent":["<template>\r\n  <el-autocomplete\r\n    v-model=\"state\"\r\n    :fetch-suggestions=\"querySearchAsync\"\r\n    placeholder=\"请输入内容\"\r\n    @select=\"handleSelect\"\r\n  ></el-autocomplete>\r\n</template>\r\n\r\n<script>\r\nimport { getTyping } from \"../../api\";\r\nimport { mapActions } from \"vuex\";\r\nimport { mapMutations } from \"vuex\";\r\nexport default {\r\n  name: \"search\",\r\n  data() {\r\n    return {\r\n      typeSuggest: [],\r\n      state: \"\",\r\n      timeout: 0,\r\n    };\r\n  },\r\n  watch: {\r\n    state: {\r\n      handler(newVal) {\r\n        if (newVal)\r\n          getTyping({ keywords: newVal }).then((response) => {\r\n            let arr = response.data.result.songs;\r\n            console.log(response.data);\r\n            this.typeSuggest = arr.map((item) => {\r\n              return Object.assign({\r\n                id: item.id,\r\n                title: item.name,\r\n                singer: item.artists[0].name,\r\n                duration: this.timeFormt(item.duration),\r\n                value: item.name + `（歌手: ${item.artists[0].name}）`,\r\n              });\r\n            });\r\n          });\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    timeFormt(value) {\r\n      value = Math.ceil(value / 1000);\r\n      let m = parseInt(value / 60);\r\n      let s = value % 60;\r\n      return m + \":\" + s;\r\n    },\r\n    ...mapActions(\"playerAbout\", [\"pushSong\"]),\r\n    ...mapMutations(\"playerAbout\", [\"changePlayingIndex\"]),\r\n    querySearchAsync(queryString, cb) {\r\n      clearTimeout(this.timeout);\r\n      if (queryString) this.timeout = 10000 * Math.random();\r\n      else this.typeSuggest = [];\r\n      this.timeout = setTimeout(() => {\r\n        var result = this.typeSuggest;\r\n        cb(result);\r\n      }, this.timeout);\r\n    },\r\n\r\n    handleSelect(item) {\r\n      let obj = Object.assign(\r\n        {},\r\n        {\r\n          id: item.id,\r\n          title: item.title,\r\n          singer: item.singer,\r\n          duration: item.duration,\r\n          url: \"https://music.163.com/song/media/outer/url?id=\" + item.id,\r\n        }\r\n      );\r\n      this.pushSong(obj);\r\n      if (this.$store.state.playerAbout.playList.includes(obj))\r\n        this.$message.success({\r\n          message: \"添加列表成功，下一首播放\",\r\n          showClose: false,\r\n          \r\n        });\r\n      else\r\n        this.$message.error({\r\n          message: \"歌曲已存在\",\r\n          showClose: false,\r\n        });\r\n      if (!this.$store.state.playerAbout.isPlaying)\r\n        this.changePlayingIndex(this.$store.state.playerAbout.playingIndex + 1);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style spoed>\r\n.el-autocomplete {  \r\n  line-height: 62px;\r\n}\r\ninput[type=\"text\"] {\r\n  border-radius: 1.5em;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/top_bar"}]}