{"remainingRequest":"C:\\Users\\Aum\\listen\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Aum\\listen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Aum\\listen\\src\\components\\top_bar\\search.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Aum\\listen\\src\\components\\top_bar\\search.vue","mtime":1631032654984},{"path":"C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Aum\\listen\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0VHlwaW5nIH0gZnJvbSAiLi4vLi4vYXBpIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInNlYXJjaCIsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlU3VnZ2VzdDogW10sCiAgICAgIHN0YXRlOiAiIiwKICAgICAgdGltZW91dDogMAogICAgfTsKICB9LAoKICB3YXRjaDogewogICAgc3RhdGU6IHsKICAgICAgaGFuZGxlcihuZXdWYWwpIHsKICAgICAgICBpZiAobmV3VmFsKSBnZXRUeXBpbmcoewogICAgICAgICAga2V5d29yZHM6IG5ld1ZhbAogICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgbGV0IGFyciA9IHJlc3BvbnNlLmRhdGEucmVzdWx0LnNvbmdzOwogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB0aGlzLnR5cGVTdWdnZXN0ID0gYXJyLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgICAgIHRpdGxlOiBpdGVtLm5hbWUsCiAgICAgICAgICAgICAgc2luZ2VyOiBpdGVtLmFydGlzdHNbMF0ubmFtZSwKICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy50aW1lRm9ybXQoaXRlbS5kdXJhdGlvbiksCiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0ubmFtZSArIGDvvIjmrYzmiYs6ICR7aXRlbS5hcnRpc3RzWzBdLm5hbWV977yJYAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CgogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdGltZUZvcm10KHZhbHVlKSB7CiAgICAgIHZhbHVlID0gTWF0aC5jZWlsKHZhbHVlIC8gMTAwMCk7CiAgICAgIGxldCBtID0gcGFyc2VJbnQodmFsdWUgLyA2MCk7CiAgICAgIGxldCBzID0gdmFsdWUgJSA2MDsKICAgICAgcmV0dXJuIG0gKyAiOiIgKyBzOwogICAgfSwKCiAgICAuLi5tYXBBY3Rpb25zKCJwbGF5ZXJBYm91dCIsIFsicHVzaFNvbmciXSksCgogICAgcXVlcnlTZWFyY2hBc3luYyhxdWVyeVN0cmluZywgY2IpIHsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7CiAgICAgIGlmIChxdWVyeVN0cmluZykgdGhpcy50aW1lb3V0ID0gMTAwMDAgKiBNYXRoLnJhbmRvbSgpO2Vsc2UgdGhpcy50eXBlU3VnZ2VzdCA9IFtdOwogICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy50eXBlU3VnZ2VzdDsKICAgICAgICBjYihyZXN1bHQpOwogICAgICB9LCB0aGlzLnRpbWVvdXQpOwogICAgfSwKCiAgICBoYW5kbGVTZWxlY3QoaXRlbSkgewogICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbih7fSwgewogICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLAogICAgICAgIHNpbmdlcjogaXRlbS5zaW5nZXIsCiAgICAgICAgZHVyYXRpb246IGl0ZW0uZHVyYXRpb24KICAgICAgfSk7CiAgICAgIHRoaXMucHVzaFNvbmcob2JqKTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;AAUA,SAAA,SAAA,QAAA,WAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;;AAEA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAAA;AAKA,GARA;;AASA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,MAAA,EAAA;AACA,YAAA,MAAA,EACA,SAAA,CAAA;AAAA,UAAA,QAAA,EAAA;AAAA,SAAA,CAAA,CAAA,IAAA,CAAA,QAAA,IAAA;AACA,cAAA,GAAA,GAAA,QAAA,CAAA,IAAA,CAAA,MAAA,CAAA,KAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,eAAA,WAAA,GAAA,GAAA,CAAA,GAAA,CAAA,IAAA,IAAA;AACA,mBAAA,MAAA,CAAA,MAAA,CAAA;AACA,cAAA,EAAA,EAAA,IAAA,CAAA,EADA;AAEA,cAAA,KAAA,EAAA,IAAA,CAAA,IAFA;AAGA,cAAA,MAAA,EAAA,IAAA,CAAA,OAAA,CAAA,CAAA,EAAA,IAHA;AAIA,cAAA,QAAA,EAAA,KAAA,SAAA,CAAA,IAAA,CAAA,QAAA,CAJA;AAKA,cAAA,KAAA,EAAA,IAAA,CAAA,IAAA,GAAA,QAAA,IAAA,CAAA,OAAA,CAAA,CAAA,EAAA,IAAA;AALA,aAAA,CAAA;AAOA,WARA,CAAA;AASA,SAZA;AAaA;;AAhBA;AADA,GATA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,SAAA,CAAA,KAAA,EAAA;AACA,MAAA,KAAA,GAAA,IAAA,CAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA;AACA,UAAA,CAAA,GAAA,QAAA,CAAA,KAAA,GAAA,EAAA,CAAA;AACA,UAAA,CAAA,GAAA,KAAA,GAAA,EAAA;AACA,aAAA,CAAA,GAAA,GAAA,GAAA,CAAA;AACA,KANA;;AAOA,OAAA,UAAA,CAAA,aAAA,EAAA,CAAA,UAAA,CAAA,CAPA;;AAQA,IAAA,gBAAA,CAAA,WAAA,EAAA,EAAA,EAAA;AACA,MAAA,YAAA,CAAA,KAAA,OAAA,CAAA;AACA,UAAA,WAAA,EAAA,KAAA,OAAA,GAAA,QAAA,IAAA,CAAA,MAAA,EAAA,CAAA,KACA,KAAA,WAAA,GAAA,EAAA;AACA,WAAA,OAAA,GAAA,UAAA,CAAA,MAAA;AACA,YAAA,MAAA,GAAA,KAAA,WAAA;AACA,QAAA,EAAA,CAAA,MAAA,CAAA;AACA,OAHA,EAGA,KAAA,OAHA,CAAA;AAIA,KAhBA;;AAkBA,IAAA,YAAA,CAAA,IAAA,EAAA;AACA,UAAA,GAAA,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACA,QAAA,EAAA,EAAA,IAAA,CAAA,EADA;AAEA,QAAA,KAAA,EAAA,IAAA,CAAA,KAFA;AAGA,QAAA,MAAA,EAAA,IAAA,CAAA,MAHA;AAIA,QAAA,QAAA,EAAA,IAAA,CAAA;AAJA,OAAA,CAAA;AAMA,WAAA,QAAA,CAAA,GAAA;AACA;;AA1BA;AA7BA,CAAA","sourcesContent":["<template>\r\n  <el-autocomplete\r\n    v-model=\"state\"\r\n    :fetch-suggestions=\"querySearchAsync\"\r\n    placeholder=\"请输入内容\"\r\n    @select=\"handleSelect\"\r\n  ></el-autocomplete>\r\n</template>\r\n\r\n<script>\r\nimport { getTyping } from \"../../api\";\r\nimport { mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"search\",\r\n  data() {\r\n    return {\r\n      typeSuggest: [],\r\n      state: \"\",\r\n      timeout: 0,\r\n    };\r\n  },\r\n  watch: {\r\n    state: {\r\n      handler(newVal) {\r\n        if (newVal)\r\n          getTyping({ keywords: newVal }).then((response) => {\r\n            let arr = response.data.result.songs;\r\n            console.log(response.data);\r\n            this.typeSuggest = arr.map((item) => {\r\n              return Object.assign({\r\n                id: item.id,\r\n                title: item.name,\r\n                singer: item.artists[0].name,\r\n                duration: this.timeFormt(item.duration),\r\n                value: item.name + `（歌手: ${item.artists[0].name}）`,\r\n              });\r\n            });\r\n          });\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    timeFormt(value) {\r\n      value = Math.ceil(value / 1000);\r\n      let m = parseInt(value / 60);\r\n      let s = value % 60;\r\n      return m + \":\" + s;\r\n    },\r\n    ...mapActions(\"playerAbout\", [\"pushSong\"]),\r\n    querySearchAsync(queryString, cb) {\r\n      clearTimeout(this.timeout);\r\n      if (queryString) this.timeout = 10000 * Math.random();\r\n      else this.typeSuggest = [];\r\n      this.timeout = setTimeout(() => {\r\n        var result = this.typeSuggest;\r\n        cb(result);\r\n      }, this.timeout);\r\n    },\r\n\r\n    handleSelect(item) {\r\n      let obj = Object.assign({},{\r\n        id: item.id,\r\n        title: item.title,\r\n        singer: item.singer,\r\n        duration: item.duration,\r\n      });\r\n      this.pushSong(obj);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style spoed>\r\n.el-autocomplete {\r\n  line-height: 62px;\r\n}\r\ninput[type=\"text\"] {\r\n  border-radius: 1.5em;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/top_bar"}]}