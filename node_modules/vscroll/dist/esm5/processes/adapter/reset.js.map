{"version":3,"file":"reset.js","sourceRoot":"","sources":["../../../../src/processes/adapter/reset.ts"],"names":[],"mappings":";AACA,OAAO,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAC;AACrD,OAAO,EAAE,UAAU,EAAE,MAAM,0BAA0B,CAAC;AACtD,OAAO,EAAE,yBAAyB,EAAE,cAAc,EAAE,aAAa,EAAE,MAAM,eAAe,CAAC;AAGzF;IAAmC,yBAA+C;IAAlF;;IAqCA,CAAC;IAnCQ,SAAG,GAAV,UAAW,QAAkB,EAAE,OAA6B;QAClD,IAAA,UAAU,GAAuD,QAAQ,WAA/D,EAAE,MAAM,GAA+C,QAAQ,OAAvD,EAAc,QAAQ,GAAyB,QAAQ,kBAAjC,EAAa,KAAK,GAAO,QAAQ,YAAf,CAAgB;QAElF,IAAI,OAAO,EAAE;YACH,IAAA,MAAI,GAAK,KAAK,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,KAAxC,CAAyC;YACrD,IAAI,CAAC,MAAI,CAAC,OAAO,EAAE;gBACjB,OAAO;aACR;YACD,IAAM,aAAW,GAAG,OAAO,YAAY,UAAU,CAAC;YAClD,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG;gBACtC,IAAM,KAAK,GAAG,MAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBAC/B,IAAM,EAAE,GAAG,UAAmD,CAAC;gBAC/D,IAAI,KAAK,CAAC,KAAK,IAAI,CAAC,aAAW,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE;oBAC3C,EAAE,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;iBACvB;YACH,CAAC,CAAC,CAAC;SACJ;QAED,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACnB,QAAQ,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QAC1B,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QAEzB,IAAM,OAAO,GAAmB,EAAE,UAAU,YAAA,EAAE,CAAC;QAC/C,IAAI,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE;YACpB,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;YACxB,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC;SACnC;QAED,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC;YACrB,OAAO,EAAE,KAAK,CAAC,OAAO;YACtB,MAAM,EAAE,aAAa,CAAC,IAAI;YAC1B,OAAO,SAAA;SACR,CAAC,CAAC;IACL,CAAC;IAEH,YAAC;AAAD,CAAC,AArCD,CAAmC,yBAAyB,CAAC,cAAc,CAAC,KAAK,CAAC,GAqCjF","sourcesContent":["import { Scroller } from '../../scroller';\nimport { DatasourceProps } from '../../inputs/index';\nimport { Datasource } from '../../classes/datasource';\nimport { BaseAdapterProcessFactory, AdapterProcess, ProcessStatus } from '../misc/index';\nimport { IDatasourceOptional, ProcessPayload } from '../../interfaces/index';\n\nexport default class Reset extends BaseAdapterProcessFactory(AdapterProcess.reset) {\n\n  static run(scroller: Scroller, options?: IDatasourceOptional): void {\n    const { datasource, buffer, viewport: { paddings }, state: { cycle } } = scroller;\n\n    if (options) {\n      const { data } = Reset.parseInput(scroller, options);\n      if (!data.isValid) {\n        return;\n      }\n      const constructed = options instanceof Datasource;\n      Object.keys(DatasourceProps).forEach(key => {\n        const param = data.params[key];\n        const ds = datasource as unknown as { [key: string]: unknown };\n        if (param.isSet || (constructed && ds[key])) {\n          ds[key] = param.value;\n        }\n      });\n    }\n\n    buffer.reset(true);\n    paddings.backward.reset();\n    paddings.forward.reset();\n\n    const payload: ProcessPayload = { datasource };\n    if (cycle.busy.get()) {\n      payload.finalize = true;\n      cycle.interrupter = Reset.process;\n    }\n\n    scroller.workflow.call({\n      process: Reset.process,\n      status: ProcessStatus.next,\n      payload\n    });\n  }\n\n}\n"]}